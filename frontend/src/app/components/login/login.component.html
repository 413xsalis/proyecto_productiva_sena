<div class="modern-auth-container">
  <div class="auth-glass">
    <!-- Logo y T√≠tulo -->
    <div class="auth-header">
      <div class="logo">
        <div class="logo-icon">üöÄ</div>
        <h1>Proyecto SENA</h1>
      </div>
      <p class="tagline">Sistema de Gesti√≥n Productiva</p>
    </div>

    <!-- Pesta√±as Login/Registro -->
    <div class="tab-container">
      <div class="tabs">
        <button 
          class="tab-button" 
          [class.active]="isLoginMode"
          (click)="switchMode()"
          [disabled]="isLoading">
          Iniciar Sesi√≥n
        </button>
        <button 
          class="tab-button" 
          [class.active]="!isLoginMode"
          (click)="switchMode()"
          [disabled]="isLoading">
          Registrarse
        </button>
      </div>
      <div class="tab-indicator" [class.register]="!isLoginMode"></div>
    </div>

    <!-- Estado del Sistema -->
    <div class="system-status" [class]="backendStatus">
      <div class="status-dot"></div>
      <span class="status-text">
        <span *ngIf="backendStatus === 'online'">Sistema conectado</span>
        <span *ngIf="backendStatus === 'offline'">Sistema no disponible</span>
        <span *ngIf="backendStatus === 'checking'">Verificando sistema...</span>
      </span>
    </div>

    <!-- Formulario de LOGIN -->
    <form *ngIf="isLoginMode" [formGroup]="loginForm" (ngSubmit)="onLogin()" class="auth-form">
      <div class="input-group">
        <div class="input-wrapper">
          <i class="icon">üë§</i>
          <input 
            type="text" 
            formControlName="username"
            class="modern-input"
            placeholder="Nombre de usuario"
            [class.error]="lf['username'].invalid && lf['username'].touched">
        </div>
        <div *ngIf="lf['username'].invalid && lf['username'].touched" class="error-text">
          ‚ö†Ô∏è Usuario requerido
        </div>
      </div>

      <div class="input-group">
        <div class="input-wrapper">
          <i class="icon">üîí</i>
          <input 
            type="password" 
            formControlName="password"
            class="modern-input"
            placeholder="Contrase√±a"
            [class.error]="lf['password'].invalid && lf['password'].touched">
        </div>
        <div *ngIf="lf['password'].invalid && lf['password'].touched" class="error-text">
          ‚ö†Ô∏è Contrase√±a requerida
        </div>
      </div>

      <button 
        type="submit" 
        class="modern-btn primary"
        [disabled]="loginForm.invalid || isLoading">
        <span *ngIf="!isLoading">Acceder al Sistema</span>
        <span *ngIf="isLoading" class="btn-loading">
          <div class="spinner"></div>
          Procesando...
        </span>
      </button>

      <div class="demo-credentials">
        <p>üí° <strong>Credenciales de prueba:</strong></p>
        <p>Usuario: <code>admin</code> | Contrase√±a: <code>1234</code></p>
      </div>
    </form>

    <!-- Formulario de REGISTRO -->
    <form *ngIf="!isLoginMode" [formGroup]="registerForm" (ngSubmit)="onRegister()" class="auth-form">
      <div class="input-group">
        <div class="input-wrapper">
          <i class="icon">üë§</i>
          <input 
            type="text" 
            formControlName="username"
            class="modern-input"
            placeholder="Nombre de usuario"
            [class.error]="rf['username'].invalid && rf['username'].touched">
        </div>
        <div *ngIf="rf['username'].invalid && rf['username'].touched" class="error-text">
          <span *ngIf="rf['username'].errors?.['required']">‚ö†Ô∏è Usuario requerido</span>
          <span *ngIf="rf['username'].errors?.['minlength']">‚ö†Ô∏è M√≠nimo 3 caracteres</span>
        </div>
      </div>

      <div class="input-group">
        <div class="input-wrapper">
          <i class="icon">üìß</i>
          <input 
            type="email" 
            formControlName="email"
            class="modern-input"
            placeholder="Correo electr√≥nico"
            [class.error]="rf['email'].invalid && rf['email'].touched">
        </div>
        <div *ngIf="rf['email'].invalid && rf['email'].touched" class="error-text">
          <span *ngIf="rf['email'].errors?.['required']">‚ö†Ô∏è Email requerido</span>
          <span *ngIf="rf['email'].errors?.['email']">‚ö†Ô∏è Formato de email inv√°lido</span>
        </div>
      </div>

      <div class="input-group">
        <div class="input-wrapper">
          <i class="icon">üîí</i>
          <input 
            type="password" 
            formControlName="password"
            class="modern-input"
            placeholder="Contrase√±a"
            [class.error]="rf['password'].invalid && rf['password'].touched">
        </div>
        <div *ngIf="rf['password'].invalid && rf['password'].touched" class="error-text">
          <span *ngIf="rf['password'].errors?.['required']">‚ö†Ô∏è Contrase√±a requerida</span>
          <span *ngIf="rf['password'].errors?.['minlength']">‚ö†Ô∏è M√≠nimo 4 caracteres</span>
        </div>
      </div>

      <div class="input-group">
        <div class="input-wrapper">
          <i class="icon">‚úÖ</i>
          <input 
            type="password" 
            formControlName="confirmPassword"
            class="modern-input"
            placeholder="Confirmar contrase√±a"
            [class.error]="rf['confirmPassword'].invalid && rf['confirmPassword'].touched">
        </div>
        <div *ngIf="rf['confirmPassword'].invalid && rf['confirmPassword'].touched" class="error-text">
          ‚ö†Ô∏è Confirma tu contrase√±a
        </div>
      </div>

      <button 
        type="submit" 
        class="modern-btn primary"
        [disabled]="registerForm.invalid || isLoading">
        <span *ngIf="!isLoading">Crear Cuenta</span>
        <span *ngIf="isLoading" class="btn-loading">
          <div class="spinner"></div>
          Creando cuenta...
        </span>
      </button>
    </form>

    <!-- Mensajes del Sistema -->
    <div *ngIf="message" class="system-message" [class]="message.includes('√©xito') || message.includes('üéâ') ? 'success' : 'error'">
      <div class="message-icon">
        <span *ngIf="message.includes('√©xito') || message.includes('üéâ')">‚úÖ</span>
        <span *ngIf="!message.includes('√©xito') && !message.includes('üéâ')">‚ö†Ô∏è</span>
      </div>
      <div class="message-text">{{ message }}</div>
    </div>

    <!-- Informaci√≥n de Desarrollo -->
    <div class="dev-info" *ngIf="false">
      <details>
        <summary>üîß Informaci√≥n de Desarrollo</summary>
        <div class="dev-details">
          <p><strong>Modo:</strong> {{ isLoginMode ? 'Login' : 'Registro' }}</p>
          <p><strong>Token:</strong> {{ token ? '‚úÖ Presente' : '‚ùå No hay token' }}</p>
          <p><strong>Formulario v√°lido:</strong> {{ isLoginMode ? loginForm.valid : registerForm.valid }}</p>
        </div>
      </details>
    </div>
  </div>

  <!-- Fondo decorativo -->
  <div class="background-shapes">
    <div class="shape shape-1"></div>
    <div class="shape shape-2"></div>
    <div class="shape shape-3"></div>
  </div>
</div>